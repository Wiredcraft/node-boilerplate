var carcass = require('carcass');
var express = require('express');
var http = require('http');

var server = carcass.constructors.server.extend();

server.prototype.initialize = function() {
    var app = this.app;

    app.configure(function() {
        app.set('port', process.env.PORT || 3000);
        app.use(express.favicon());
        app.use(express.logger('dev'));
        app.use(express.bodyParser());
        app.use(express.methodOverride());
    });

    app.configure('development', function() {
        app.use(express.errorHandler());
    });

    app.get('/', function(req, res) {
        res.json({
            title: 'Express'
        });
    });

};

server.prototype.start = function(callback) {
    this.server = http.createServer(this.app).listen(3000, callback);
};

module.exports = server;
